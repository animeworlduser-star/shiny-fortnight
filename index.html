<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Arquitectura de Computadoras — Pastel Minimal+</title>
<meta name="description" content="App educativa: resúmenes, mapas conceptuales, multimedia por unidad y minijuegos. Glosario completo y UI pastel con microinteracciones.">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js" defer></script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const mm = window.mermaid;
    if (mm && typeof mm.initialize === 'function') {
      mm.initialize({ startOnLoad:true, securityLevel:'strict' });
      document.documentElement.dataset.mermaid = 'on';
    } else {
      document.documentElement.dataset.mermaid = 'off';
    }
  });
</script>
<style>
  :root{
    --bg:#fffdfb; --fg:#0f172a; --muted:#6b7280;
    --p1:#bde0fe; --p2:#ffd6a5; --p3:#ffc6ff; --p4:#caffbf; --p5:#ffe3e3;
    --accent:#8ecae6; --maxw:1200px; --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    margin:0; color:var(--fg);
    background:
      radial-gradient(28px 28px at 80px 80px, rgba(189,224,254,.35) 32%, transparent 33%) 0 0/160px 160px,
      radial-gradient(22px 22px at 160px 40px, rgba(255,198,255,.28) 30%, transparent 31%) 0 0/220px 220px,
      radial-gradient(26px 26px at 100px 160px, rgba(202,255,191,.26) 30%, transparent 31%) 0 0/240px 240px,
      linear-gradient(180deg, #ffffff, var(--bg) 60%);
    line-height:1.65;
  }
  .container{max-width:var(--maxw); margin:0 auto; padding:12px 16px 24px}
  header{
    position:static; z-index:1;
    border-radius:0 0 var(--radius) var(--radius);
    background:linear-gradient(120deg, var(--p1), var(--p3) 50%, var(--p2));
    padding:12px 16px; box-shadow:0 8px 24px rgba(0,0,0,.08);
  }
  .brand{display:flex; gap:14px; align-items:center; max-width:var(--maxw); margin:0 auto}
  .brand h1{margin:0; font-size:1.1rem; letter-spacing:.2px}
  .toolbar{display:flex; gap:10px; align-items:center; justify-content:space-between; max-width:var(--maxw); margin:8px auto 0}
  nav ul{display:flex; gap:10px; list-style:none; padding:0; margin:0; flex-wrap:wrap}
  nav a{
    padding:8px 12px; text-decoration:none; border-radius:999px;
    background:rgba(255,255,255,.75); border:1px solid rgba(0,0,0,.06);
    transition:transform .15s, box-shadow .15s, background .2s;
  }
  nav a:hover{transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.1)}
  .acc-controls{display:flex; gap:8px; align-items:center}
  button.control,.btn-primary{
    padding:10px 12px; border-radius:12px; border:1px solid rgba(0,0,0,0.08); cursor:pointer;
    background:#fff; transition:.15s transform, .15s box-shadow, .2s background;
  }
  .btn-primary{
    background:linear-gradient(135deg, var(--accent), var(--p1));
    color:#073b4c; font-weight:700;
  }
  .btn-primary:hover{transform:translateY(-1px); box-shadow:0 12px 20px rgba(0,0,0,.08)}
  .chip{display:inline-block; padding:6px 12px; border-radius:999px; background:#fff; border:1px dashed #cbd5e1}
  .card{padding:16px; border-radius:16px; background:rgba(255,255,255,.96); border:1px solid rgba(0,0,0,0.06); box-shadow:0 6px 20px rgba(31,41,55,.06)}
  main{display:grid; grid-template-columns:310px 1fr; gap:20px; margin-top:16px}
  aside{border-radius:var(--radius); padding:12px; background:rgba(255,255,255,.9); border:1px solid rgba(0,0,0,.05); box-shadow:0 6px 20px rgba(0,0,0,.05)}
  .section{
    background:rgba(255,255,255,.96); padding:18px; border-radius:var(--radius); margin:16px 0;
    border:1px solid rgba(0,0,0,.05); box-shadow:0 8px 24px rgba(0,0,0,.06)
  }
  .hero{position:relative; overflow:hidden; border-radius:var(--radius); padding:18px; margin-top:12px}
  .hero .bg{position:absolute; inset:0; opacity:.6; pointer-events:none}
  .tabs{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px}
  .tab{padding:8px 12px; border-radius:999px; border:1px solid #cbd5e1; cursor:pointer; background:#fff}
  .tab.active{background:var(--p2); color:#4b2a00; border-color:transparent}
  .panel{display:none}
  .panel.active{display:block; animation:fade .18s ease-out}
  @keyframes fade{from{opacity:0; transform:translateY(2px)} to{opacity:1; transform:none}}
  .notice{color:var(--muted); font-size:.95rem}
  .gloss{border-bottom:2px dotted #94a3b8; cursor:help}
  mark{background:#fff3b0; padding:0 3px}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .mcq{display:grid; gap:8px; margin-top:8px}
  .pill{display:inline-block; padding:8px 12px; border:2px dashed #9ca3af; border-radius:999px; cursor:grab; background:#fff; transition:.15s transform}
  .pill:active{transform:scale(.96)}
  .slot{min-width:130px; min-height:48px; border:2px dashed #94a3b8; border-radius:12px; display:flex; align-items:center; justify-content:center; padding:6px; background:#fbfefd}
  .slot.filled{border-style:solid; background:#eafff6}
  .kpi{display:inline-block; padding:4px 8px; border-radius:8px; background:#f1f5f9}
  .search{display:flex; gap:8px; align-items:center}
  .search input{flex:1; padding:10px 12px; border:1px solid #cbd5e1; border-radius:10px}
  details{border-radius:12px; padding:10px 12px; background:linear-gradient(90deg,#fff,#fff8); border:1px solid rgba(0,0,0,.05); margin-bottom:10px}
  details[open]{background:linear-gradient(90deg,var(--p4), #fff)}
  details>summary{cursor:pointer; font-weight:700}
  svg{max-width:100%; height:auto}
  video,audio,iframe{width:100%; border:0; border-radius:12px}
  .grid{display:grid; gap:14px; grid-template-columns:1fr 1fr}
  .editbar{display:flex; gap:8px; flex-wrap:wrap; margin:.5rem 0}
  .editbar input{flex:1; min-width:140px; padding:8px 10px; border:1px solid #cbd5e1; border-radius:10px}
  @media(max-width:980px){ main{grid-template-columns:1fr} aside{order:2} .grid{grid-template-columns:1fr} }
  .skip-link{position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden}
  .skip-link:focus{position:static; width:auto; height:auto; margin:8px}
  mark:focus{outline:3px solid #60a5fa; border-radius:6px}
</style>
</head>
<body>
<a href="#main" class="skip-link">Saltar al contenido principal</a>

<header>
  <div class="brand">
    <svg width="44" height="44" viewBox="0 0 24 24" aria-hidden="true">
      <defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#bde0fe"/><stop offset="1" stop-color="#ffc6ff"/></linearGradient></defs>
      <rect width="100%" height="100%" rx="8" fill="url(#g)"/>
    </svg>
    <div>
      <h1>Arquitectura de Computadoras — Pastel Minimal+</h1>
      <small style="color:#0f172a">Resúmenes • Mapas • Multimedia por unidad • Mini-juegos • Responsive</small>
    </div>
  </div>
  <div class="toolbar">
    <nav aria-label="Navegación principal">
      <ul>
        <li><a href="#home">Bienvenida</a></li>
        <li><a href="#unidades">Unidades</a></li>
        <li><a href="#conceptos">Mapas</a></li>
        <li><a href="#multimedia">Multimedia</a></li>
        <li><a href="#juegos">Mini-juegos</a></li>
        <li><a href="#accesibilidad">Accesibilidad</a></li>
      </ul>
    </nav>
    <div class="acc-controls">
      <button class="control" id="contrastBtn" aria-pressed="false">Alto contraste</button>
      <button class="control" id="increaseText">A+ Texto</button>
      <button class="control" id="decreaseText">A- Texto</button>
    </div>
  </div>
</header>

<div class="container" id="app">
  <!-- Bienvenida -->
  <div id="home" class="hero section">
    <svg class="bg" viewBox="0 0 800 200" preserveAspectRatio="none" aria-hidden="true">
      <defs><linearGradient id="wave" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#bde0fe"/><stop offset="1" stop-color="#ffd6a5"/></linearGradient></defs>
      <path d="M0,120 C150,180 250,40 400,100 C550,160 650,40 800,120 L800,200 L0,200 Z" fill="url(#wave)"/>
    </svg>
    <h2 style="position:relative">¡Bienvenidos/as!</h2>
    <p style="position:relative">
      Acá vamos a entender, sin vueltas, cómo una compu corre tus programas: qué hace la <em>CPU</em>, cómo trabaja la memoria,
      para qué sirven los <em>buses</em> y cómo se conectan los periféricos. Todo con explicaciones cortas, ejemplos simples,
      mapas que ordenan ideas y mini-juegos para practicar. Al terminar, vas a poder explicar el ciclo de instrucción,
      leer un diagrama y proponer mejoras (más RAM, mejor <em>cache</em> o un bus distinto) según el caso. ¡Vamos!
    </p>
  </div>

  <main id="main">
    <aside aria-label="Índice y herramientas">
      <div class="section">
        <strong>Buscar en la página</strong>
        <div class="search" style="margin-top:8px">
          <input id="searchInput" type="search" placeholder="Escribí y presioná Enter (ej.: ALU, caché, DMA...)" aria-label="Buscar término">
          <button class="control" id="clearSearch">Limpiar</button>
        </div>
        <p class="notice">Enter realiza la búsqueda; otro Enter salta a la siguiente coincidencia.</p>
      </div>

      <div class="section">
        <strong>Glosario rápido</strong>
        <p class="notice">Tocá un tema para ver una definición corta.</p>
        <div class="row" id="glossWrap" style="gap:6px"></div>
      </div>

      <div class="section">
        <strong>Estado</strong>
        <p class="notice" id="netStatus">Comprobando conectividad...</p>
        <span class="chip" id="mmStatus">Mermaid: —</span>
      </div>
    </aside>

    <section>
      <!-- UNIDADES -->
      <article id="unidades" class="section">
        <h2>Unidades</h2>

        <details open>
          <summary>1) Introducción a la Tecnicatura Informática</summary>
          <p>La tecnicatura prepara perfiles capaces de integrar hardware y software para resolver problemas reales con criterio profesional. Verás cómo las decisiones de arquitectura impactan en el rendimiento de los programas y en la experiencia del usuario. Se introduce el análisis de desempeño (latencia, <em>throughput</em>, CPI) y la lectura de métricas simples. También se fomenta la comunicación técnica clara, el trabajo colaborativo y el uso responsable de recursos digitales. Al finalizar, podrás explicar a grandes rasgos cómo se ejecuta un programa sobre una computadora real y qué palancas básicas existen para mejorar tiempos de respuesta.</p>
        </details>

        <details>
          <summary>2) Propiedad de la información</summary>
          <p>Estudia derechos de autor, licencias (Creative Commons, GPL/MIT) y su aplicación en materiales académicos y código. Diferenciás uso justo, atribución obligatoria y restricciones de redistribución. Se abordan privacidad, datos personales y buenas prácticas para compartir recursos (apuntes, imágenes, audio). Practicarás elegir una licencia apropiada para tus trabajos y citar correctamente fuentes y contenidos de terceros. Al cerrar la unidad, sabrás proteger tus producciones y respetar la de otros dentro y fuera del aula.</p>
        </details>

        <details>
          <summary>3) Organización y Arquitectura de computadoras</summary>
          <p>“Arquitectura” (ISA) define instrucciones, registros visibles y modos de direccionamiento; la “organización” describe cómo se implementa físicamente: unidad de control, ALU, registros internos, interconexiones y memoria. Verás niveles de abstracción (hardware, microarquitectura, ISA, SO) y cómo colaboran para ejecutar programas. Un ejemplo típico: una suma de alto nivel se compila a instrucciones que la ALU resuelve sobre registros, mientras la memoria y los buses sostienen el flujo de datos. Al terminar, podrás describir un esquema general de bloques y sus funciones.</p>
        </details>

        <details>
          <summary>4) Microprocesadores</summary>
          <p>El ciclo de instrucción es <em>fetch→decode→execute→memory→write-back</em>. Para acelerar, las CPUs usan <em>pipeline</em>, diseño superscalar, predicción de saltos y ejecución fuera de orden. Analizarás <em>hazards</em> (de datos, control y estructurales) y técnicas como <em>forwarding</em> y burbujas. Discutiremos mediciones de <em>speedup</em> y límites del paralelismo. Al finalizar, entenderás por qué no todo se paraleliza y cómo la microarquitectura intenta mantener ocupadas las unidades de ejecución sin violar dependencias.</p>
        </details>

        <details>
          <summary>5) Memoria principal: ROM y RAM</summary>
          <p>La ROM almacena firmware/arranque y rara vez cambia; la RAM es volátil y guarda programas y datos en ejecución. Importan la latencia, el ancho de bus, la organización en bancos y las generaciones DDR. Verás cómo falta de RAM incrementa el <em>swapping</em> y degrada el rendimiento. Practicarás cálculos simples de tiempos de acceso y throughput efectivo. Al finalizar, diferenciarás claramente funciones y métricas de ROM y RAM y podrás justificar mejoras de memoria en situaciones típicas.</p>
        </details>

        <details>
          <summary>6) Memoria Caché y Memoria Virtual</summary>
          <p>Las cachés L1/L2/L3 explotan la <em>localidad</em> para reducir accesos a RAM: políticas (LRU/FIFO), mapeo y estrategias de escritura (<em>write-through</em>/<em>write-back</em>) afectan el rendimiento. La memoria virtual ofrece a cada proceso un espacio lógico con traducción rápida vía TLB. Analizarás fallos de caché y de página y su impacto en la latencia media (AMAT). Al finalizar, serás capaz de razonar sobre patrones de acceso (contiguo vs. aleatorio) y su efecto en el <em>cache hit</em>.</p>
        </details>

        <details>
          <summary>7) Buses y sistemas de interconexión</summary>
          <p>Los buses conectan CPU, memoria y periféricos (p. ej., PCIe, USB, I²C, SPI). Evaluarás ancho, frecuencia, latencia, topología y protocolos, además de cómo el arbitraje decide prioridades. Veremos casos como GPU en PCIe x16 vs. x4 y cuellos de botella por dispositivos compartiendo enlaces. Al finalizar, podrás elegir interconexiones razonables para cada dispositivo según necesidades de ancho de banda y latencia.</p>
        </details>

        <details>
          <summary>8) Sistemas de Arranque y configuración</summary>
          <p>Tras el <em>reset</em>, el firmware (BIOS/UEFI) ejecuta el POST, inicializa dispositivos y lanza el <em>bootloader</em>, que configura memoria/tables (GDT/IDT) y transfiere control al kernel. Revisarás orden de booteo, drivers iniciales y mecanismos como Secure Boot. Practicaremos diagnosticar problemas comunes de arranque y cambiar parámetros básicos de firmware. Al finalizar, podrás describir el flujo completo y reconocer dónde se rompe.</p>
        </details>

        <details>
          <summary>9) Periféricos</summary>
          <p>Los dispositivos de entrada/salida se coordinan con controladores. Con <strong>DMA</strong>, se transfieren datos memoria↔I/O sin bloquear la CPU, que sólo interviene al inicio/fin (interrupción). Compararás <em>polling</em> vs. interrupciones vs. DMA según carga y latencia tolerable. Al finalizar, sabrás seleccionar el mecanismo de E/S apropiado para un caso práctico (por ejemplo, captura de video vs. teclado).</p>
        </details>

        <details>
          <summary>10) Alan Turing: ¿puede pensar una máquina?</summary>
          <p>La “prueba de imitación” propone un criterio práctico de inteligencia. Verás su contexto histórico, alcances y objeciones (comprensión real, creatividad, conciencia). Analizaremos ejemplos de sistemas conversacionales y límites del enfoque. Al finalizar, podrás argumentar críticamente sobre la vigencia del test y su relación con la IA actual.</p>
        </details>

        <details>
          <summary>11) Inteligencia Artificial para informáticos</summary>
          <p>Desde reglas y heurísticas hasta <em>machine learning</em> y redes neuronales modernas. Tareas típicas: clasificación, regresión, búsqueda. Impacto en hardware: SIMD, GPU y necesidades de memoria/ancho de banda. Al finalizar, podrás identificar enfoques básicos de IA para problemas comunes y reconocer cuándo hace falta aceleración especializada.</p>
        </details>
      </article>

      <!-- MAPAS conceptuales -->
      <article id="conceptos" class="section">
        <h2>Mapas conceptuales</h2>
        <div class="tabs" role="tablist" id="tabsConceptos">
          <button type="button" class="tab active" data-tab="tab-ciclo" role="tab" aria-controls="tab-ciclo" aria-selected="true">Ciclo de instrucción</button>
          <button type="button" class="tab" data-tab="tab-dma" role="tab" aria-controls="tab-dma" aria-selected="false">DMA</button>
          <button type="button" class="tab" data-tab="tab-mem" role="tab" aria-controls="tab-mem" aria-selected="false">Jerarquía de memoria</button>
        </div>

        <div class="panel active" id="tab-ciclo" role="tabpanel" tabindex="0">
          <div class="mermaid" data-online>
graph TD
  A[Fetch] --> B[Decode]
  B --> C[Execute]
  C --> D[Memory access]
  D --> E[Write-back]
  E --> F[Actualizar flags]
  F --> A
          </div>
          <div class="fallback-svg" data-offline>
            <svg viewBox="0 0 900 320" aria-label="Ciclo de instrucción (SVG)">
              <rect width="900" height="320" fill="#fff"/>
              <g font-family="Arial, sans-serif" font-size="14">
                <rect x="60" y="60" width="140" height="50" rx="8" fill="#bde0fe" stroke="#094"/><text x="130" y="92" text-anchor="middle">Fetch</text>
                <line x1="200" y1="85" x2="250" y2="85" stroke="#333"/><polygon points="250,85 242,80 242,90" fill="#333"/>
                <rect x="250" y="60" width="140" height="50" rx="8" fill="#ffc6ff" stroke="#094"/><text x="320" y="92" text-anchor="middle">Decode</text>
                <line x1="390" y1="85" x2="440" y2="85" stroke="#333"/><polygon points="440,85 432,80 432,90" fill="#333"/>
                <rect x="440" y="60" width="140" height="50" rx="8" fill="#caffbf" stroke="#094"/><text x="510" y="92" text-anchor="middle">Execute</text>
                <line x1="580" y1="85" x2="630" y2="85" stroke="#333"/><polygon points="630,85 622,80 622,90" fill="#333"/>
                <rect x="630" y="60" width="160" height="50" rx="8" fill="#ffd6a5" stroke="#094"/><text x="710" y="92" text-anchor="middle">Memory</text>
                <line x1="630" y1="110" x2="400" y2="110" stroke="#333"/><polygon points="400,110 408,105 408,115" fill="#333"/>
                <rect x="360" y="130" width="160" height="50" rx="8" fill="#fff9c3" stroke="#094"/><text x="440" y="162" text-anchor="middle">Write-back</text>
              </g>
            </svg>
          </div>
        </div>

        <div class="panel" id="tab-dma" role="tabpanel" tabindex="0">
          <div class="mermaid" data-online>
flowchart LR
  CPU[CPU] -->|Petición| DMAC[Controlador DMA]
  DMAC -->|Arbitraje| BUS[Bus del sistema]
  DMAC <--> MEM[Memoria]
  DMAC <--> IO[Periférico]
  DMAC -->|IRQ fin| CPU
  classDef comp fill:#bde0fe,stroke:#094,stroke-width:1px;
  class CPU,DMAC,MEM,IO,BUS comp;
          </div>
          <div class="fallback-svg" data-offline>
            <svg viewBox="0 0 920 300" aria-label="DMA (SVG)">
              <rect width="920" height="300" fill="#fff"/>
              <g font-family="Arial, sans-serif" font-size="14">
                <rect x="40" y="60" width="120" height="50" rx="8" fill="#bde0fe" stroke="#094"/><text x="100" y="92" text-anchor="middle">CPU</text>
                <rect x="220" y="60" width="190" height="50" rx="8" fill="#caffbf" stroke="#094"/><text x="315" y="92" text-anchor="middle">Controlador DMA</text>
                <rect x="450" y="60" width="140" height="50" rx="8" fill="#ffd6a5" stroke="#094"/><text x="520" y="92" text-anchor="middle">Memoria</text>
                <rect x="640" y="60" width="160" height="50" rx="8" fill="#ffc6ff" stroke="#094"/><text x="720" y="92" text-anchor="middle">Periférico</text>
                <text x="60" y="150">Flujo: CPU solicita → DMAC arbitra bus → Copia Memoria↔I/O → Interrupción de fin a CPU</text>
              </g>
            </svg>
          </div>
        </div>

        <div class="panel" id="tab-mem" role="tabpanel" tabindex="0">
          <div class="mermaid" data-online>
graph TD
  A[Registros]:::fast --> B[L1]:::fast
  B --> C[L2]
  C --> D[L3]
  D --> E[RAM]
  E --> F[Almacenamiento]
  classDef fast fill:#bde0fe,stroke:#094,stroke-width:1px;
          </div>
          <div class="fallback-svg" data-offline>
            <svg viewBox="0 0 920 260" aria-label="Jerarquía de memoria (SVG)">
              <rect width="920" height="260" fill="#fff"/>
              <g font-family="Arial, sans-serif" font-size="14">
                <rect x="40" y="40" width="120" height="40" rx="8" fill="#bde0fe" stroke="#094"/><text x="100" y="66" text-anchor="middle">Registros</text>
                <line x1="160" y1="60" x2="240" y2="60" stroke="#333"/>
                <rect x="240" y="40" width="80" height="40" rx="8" fill="#ffc6ff" stroke="#094"/><text x="280" y="66" text-anchor="middle">L1</text>
                <line x1="320" y1="60" x2="400" y2="60" stroke="#333"/>
                <rect x="400" y="40" width="80" height="40" rx="8" fill="#ffc6ff" stroke="#094"/><text x="440" y="66" text-anchor="middle">L2</text>
                <line x1="480" y1="60" x2="560" y2="60" stroke="#333"/>
                <rect x="560" y="40" width="80" height="40" rx="8" fill="#ffc6ff" stroke="#094"/><text x="600" y="66" text-anchor="middle">L3</text>
                <line x1="640" y1="60" x2="720" y2="60" stroke="#333"/>
                <rect x="720" y="40" width="120" height="40" rx="8" fill="#caffbf" stroke="#094"/><text x="780" y="66" text-anchor="middle">RAM</text>
                <line x1="840" y1="60" x2="900" y2="60" stroke="#333"/>
                <text x="848" y="50">Disco</text>
              </g>
            </svg>
          </div>
          <ul class="notice">
            <li>Registros/L1 son súper rápidos y pequeños; almacenamiento es grande pero lento.</li>
            <li>La <em>localidad</em> mejora el <em>cache hit</em> y reduce AMAT.</li>
          </ul>
        </div>
      </article>

      <!-- MULTIMEDIA -->
      <article id="multimedia" class="section">
        <h2>Multimedia por unidad</h2>
        <p class="notice">Pegá el <code>ID de YouTube</code> y la <code>URL de Spotify (embed)</code> o cargá archivos locales.</p>
        <div id="mediaGrid" class="grid"></div>
      </article>

      <!-- JUEGOS -->
      <article id="juegos" class="section">
        <h2>Mini-juegos</h2>
        <div class="card">
          <h3>Ordená el ciclo de instrucción</h3>
          <p>Arrastrá o tocá para ordenar (1→5). <strong>Tenés 30 s</strong>. <em>Verificar</em> detiene el tiempo.</p>
          <div class="row" style="gap:8px">
            <button class="btn-primary" id="startDrag">Comenzar</button>
            <button class="control" id="verifyBtn" disabled>Verificar</button>
            <span class="kpi">Tiempo: <span id="timer">30</span>s</span>
            <span class="kpi">Piezas: <span id="score">0</span>/5</span>
            <button class="control" id="resetGame">Reiniciar</button>
          </div>
          <div class="row" id="pool" style="margin-top:10px"></div>
          <div class="row" id="slots" style="margin-top:10px">
            <div class="slot" data-pos="1">—</div><div class="slot" data-pos="2">—</div>
            <div class="slot" data-pos="3">—</div><div class="slot" data-pos="4">—</div>
            <div class="slot" data-pos="5">—</div>
          </div>
          <div id="resultGame" class="notice"></div>
        </div>

        <div class="card">
          <h3>Quiz rápido (5 preguntas)</h3>
          <p>Tenés <strong>30 s</strong>. Iniciá con <em>Comenzar</em>; sonidos para correcto, incorrecto y tiempo agotado.</p>
          <div class="row">
            <button class="btn-primary" id="startQuizBtn">Comenzar</button>
            <span class="kpi">Tiempo: <span id="quizTimer">30</span>s</span>
            <span class="kpi">Puntaje: <span id="quizScore">0</span>/5</span>
            <button class="control" id="resetQuiz">Reiniciar</button>
          </div>
          <form id="quizForm" class="mcq" style="margin-top:8px">
            <div>
              <strong>1)</strong> ¿Qué componente realiza operaciones aritmético-lógicas?
              <div><label><input type="radio" name="q1" value="ALU" disabled> ALU</label></div>
              <div><label><input type="radio" name="q1" value="TLB" disabled> TLB</label></div>
            </div>
            <div>
              <strong>2)</strong> ¿Qué etapa puede leer/escribir en memoria?
              <div><label><input type="radio" name="q2" value="Memory" disabled> Memory access</label></div>
              <div><label><input type="radio" name="q2" value="Decode" disabled> Decode</label></div>
            </div>
            <div>
              <strong>3)</strong> ¿Qué patrón mejora la localidad?
              <div><label><input type="radio" name="q3" value="Contiguo" disabled> Acceso contiguo</label></div>
              <div><label><input type="radio" name="q3" value="Aleatorio" disabled> Acceso aleatorio</label></div>
            </div>
            <div>
              <strong>4)</strong> En IA, ¿cuál es una tarea típica tratada en la unidad?
              <div><label><input type="radio" name="q4" value="Clasificacion" disabled> Clasificación</label></div>
              <div><label><input type="radio" name="q4" value="Desfragmentacion" disabled> Desfragmentación de disco</label></div>
            </div>
            <div>
              <strong>5)</strong> En el arranque, ¿qué componente transfiere el control al kernel?
              <div><label><input type="radio" name="q5" value="Bootloader" disabled> Bootloader</label></div>
              <div><label><input type="radio" name="q5" value="TLB" disabled> TLB</label></div>
            </div>
            <div class="row">
              <button type="button" class="btn-primary" id="submitQuiz" disabled>Enviar</button>
            </div>
          </form>
          <div id="quizMsg" class="notice"></div>
        </div>

        <div class="card">
          <h3>Flashcards</h3>
          <p>Tocá/clic para alternar pregunta ↔ respuesta.</p>
          <div id="flashWrap" class="row"></div>
        </div>
      </article>

      <article id="accesibilidad" class="section">
        <h2>Accesibilidad</h2>
        <ul>
          <li>Buscador por Enter (no interrumpe la escritura)</li>
          <li>Mapas con fallback SVG (online/offline)</li>
          <li>Controles de contraste y tamaño de texto</li>
        </ul>
      </article>
    </section>
  </main>

  <footer style="margin-top:18px; text-align:center; color:#6b7280; font-size:0.9rem">
    <p>© 2025 · App educativa pastel minimal+</p>
  </footer>
</div>

<script>
  /* ===== Estado red + Mermaid ===== */
  function updateStatus(){
    const online = navigator.onLine;
    document.getElementById('netStatus').textContent = online ? 'Online' : 'Offline';
    const mmOn = document.documentElement.dataset.mermaid === 'on';
    document.getElementById('mmStatus').textContent = 'Mermaid: ' + (mmOn && online ? 'activo' : 'fallback SVG');
    document.querySelectorAll('[data-online]').forEach(el => { el.style.display = (online && mmOn) ? '' : 'none'; });
    document.querySelectorAll('[data-offline]').forEach(el => { el.style.display = (online && mmOn) ? 'none' : ''; });
  }
  window.addEventListener('online', updateStatus);
  window.addEventListener('offline', updateStatus);
  window.addEventListener('DOMContentLoaded', updateStatus);

  /* ===== Accesibilidad ===== */
  const contrastBtn = document.getElementById('contrastBtn');
  const inc = document.getElementById('increaseText');
  const dec = document.getElementById('decreaseText');
  contrastBtn.addEventListener('click', ()=>{
    const on = document.documentElement.hasAttribute('data-contrast');
    document.documentElement.toggleAttribute('data-contrast', !on);
    contrastBtn.setAttribute('aria-pressed', String(!on));
  });
  let base = 100;
  const setFont = (pct)=> document.documentElement.style.fontSize = pct + '%';
  inc.addEventListener('click', ()=>{ base = Math.min(170, base + 10); setFont(base); });
  dec.addEventListener('click', ()=>{ base = Math.max(80, base - 10); setFont(base); });

  /* ===== Glosario ===== */
  const glossItems = [
    {t:'Tecnicatura', d:'Perfil para integrar hardware y software y resolver problemas reales.'},
    {t:'Propiedad de la info', d:'Derechos de autor, licencias (CC, GPL/MIT), privacidad y datos.'},
    {t:'Org. & Arquitectura', d:'ISA + organización: CPU, memoria, buses y periféricos.'},
    {t:'Microprocesadores', d:'Ciclo: fetch, decode, execute, memory, write-back; pipeline y hazards.'},
    {t:'ROM & RAM', d:'ROM: firmware; RAM: programas/datos activos, volátil.'},
    {t:'Caché & Virtual', d:'L1/L2/L3, políticas, TLB y paginación.'},
    {t:'Buses', d:'PCIe, USB, I²C, SPI; ancho, latencia y arbitraje.'},
    {t:'Arranque/Config', d:'POST, bootloader, kernel; drivers y Secure Boot.'},
    {t:'Periféricos', d:'E/S con controladores; interrupciones y DMA.'},
    {t:'Alan Turing', d:'Prueba de imitación y debates de IA.'},
    {t:'IA', d:'Reglas, ML y redes; tareas y aceleración en GPU.'},
    {t:'ALU', d:'Operaciones aritmético-lógicas.'},
    {t:'Registros', d:'Memoria interna ultra-rápida de la CPU.'},
    {t:'Pipeline', d:'Etapas solapadas para mayor throughput.'},
    {t:'Hazard', d:'Conflictos (datos/control/estructural) en pipeline.'},
    {t:'TLB', d:'Caché de traducciones virtual→física.'},
    {t:'AMAT', d:'Tiempo medio de acceso efectivo a memoria.'},
    {t:'DMA', d:'Transferencia memoria↔I/O sin bloquear la CPU.'},
    {t:'PCIe', d:'Bus de alta velocidad por “lanes”.'},
    {t:'UEFI/BIOS', d:'Firmware de arranque y configuración.'},
  ];
  const glossWrap = document.getElementById('glossWrap');
  glossItems.forEach(g=>{
    const s = document.createElement('button');
    s.type='button'; s.className = 'chip gloss'; s.textContent = g.t; s.title = g.d;
    s.addEventListener('click', ()=> alert(`${g.t}: ${g.d}`));
    glossWrap.appendChild(s);
  });

  /* ===== Buscador: SOLO con Enter ===== */
  const searchInput = document.getElementById('searchInput');
  const clearSearch = document.getElementById('clearSearch');
  let prevMarks = [], markIndex = 0;

  function clearMarks(){
    prevMarks.forEach(m=>{
      const txt = document.createTextNode(m.textContent);
      m.replaceWith(txt);
    });
    prevMarks = []; markIndex = 0;
  }
  function openAncestors(el){
    let n = el.parentElement;
    while(n){
      if(n.tagName === 'DETAILS') n.open = true;
      n = n.parentElement;
    }
  }
  function gotoMatch(i){
    if(!prevMarks.length) return;
    const m = prevMarks[i];
    openAncestors(m);
    m.setAttribute('tabindex','-1');
    m.scrollIntoView({behavior:'smooth', block:'center'});
    setTimeout(()=> m.focus(), 150);
  }
  function highlight(term){
    clearMarks();
    if(!term) return;
    const walker = document.createTreeWalker(document.getElementById('app'), NodeFilter.SHOW_TEXT, null);
    const nodes = [];
    while(walker.nextNode()) nodes.push(walker.currentNode);
    nodes.forEach(n=>{
      const t = n.textContent;
      const idx = t.toLowerCase().indexOf(term.toLowerCase());
      if(idx >= 0 && n.parentElement && !['SCRIPT','STYLE','INPUT','TEXTAREA','IFRAME'].includes(n.parentElement.tagName)){
        const before = t.slice(0, idx);
        const mid = t.slice(idx, idx+term.length);
        const after = t.slice(idx+term.length);
        const frag = document.createDocumentFragment();
        if(before) frag.appendChild(document.createTextNode(before));
        const m = document.createElement('mark'); m.textContent = mid; prevMarks.push(m); frag.appendChild(m);
        if(after) frag.appendChild(document.createTextNode(after));
        n.replaceWith(frag);
      }
    });
    if(prevMarks.length){ markIndex = 0; gotoMatch(0); }
  }
  searchInput.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){
      e.preventDefault();
      if(!prevMarks.length){
        const term = searchInput.value.trim();
        if(term) highlight(term);
      } else {
        markIndex = (markIndex + 1) % prevMarks.length;
        gotoMatch(markIndex);
      }
    }
  });
  clearSearch.addEventListener('click', ()=>{ searchInput.value=''; clearMarks(); });

  /* ===== Tabs Mapas ===== */
  document.getElementById('tabsConceptos').addEventListener('click', (e)=>{
    const btn = e.target.closest('.tab'); if(!btn) return;
    const id = btn.dataset.tab;
    document.querySelectorAll('.tab').forEach(b=>{ b.classList.toggle('active', b===btn); b.setAttribute('aria-selected', b===btn ? 'true':'false'); });
    document.querySelectorAll('.panel').forEach(p=> p.classList.remove('active'));
    const panel = document.getElementById(id);
    if(panel){ panel.classList.add('active'); panel.focus(); }
  });

  /* ===== Multimedia ===== */
  const unidades = [
    {id:1,  titulo:'Introducción a la Tecnicatura Informática'},
    {id:2,  titulo:'Propiedad de la información'},
    {id:3,  titulo:'Organización y Arquitectura de computadoras'},
    {id:4,  titulo:'Microprocesadores'},
    {id:5,  titulo:'Memoria principal: ROM y RAM'},
    {id:6,  titulo:'Memoria Caché y Memoria Virtual'},
    {id:7,  titulo:'Buses y sistemas de interconexión'},
    {id:8,  titulo:'Sistemas de Arranque y configuración'},
    {id:9,  titulo:'Periféricos'},
    {id:10, titulo:'Alan Turing: ¿puede pensar una máquina?'},
    {id:11, titulo:'Inteligencia Artificial para informáticos'},
  ];
  const mediaGrid = document.getElementById('mediaGrid');
  const preloads = {
    1:{yt:'ZUPmgSe-6OY', sp:'https://open.spotify.com/embed/show/3hZpVtjGWqgqATmVom54uK'},
    2:{yt:'8Ec4Pgs8ClA', sp:'https://open.spotify.com/embed/show/1qygXaf31lRq4riPB9gzwq'},
    3:{yt:'-URf73z9tKY', sp:'https://open.spotify.com/embed/show/5LcjSSCRKKaxOqogSLGbIa'},
    4:{yt:'Mzuc7Js5YUc', sp:'https://open.spotify.com/embed/show/5LcjSSCRKKaxOqogSLGbIa'},
    5:{yt:'nIKzItn5W8g', sp:'https://open.spotify.com/embed/show/3hZpVtjGWqgqATmVom54uK'},
    6:{yt:'GGf3wGqPbq8', sp:'https://open.spotify.com/embed/show/5LcjSSCRKKaxOqogSLGbIa'},
    7:{yt:'x40DuFPXBCQ', sp:'https://open.spotify.com/embed/show/3hZpVtjGWqgqATmVom54uK'},
    8:{yt:'P56lWEma6UA', sp:'https://open.spotify.com/embed/show/2IsAFkFJY2ikjSei2Z2eFJ'},
    9:{yt:'YRDlm4iQbxE', sp:'https://open.spotify.com/embed/show/3hZpVtjGWqgqATmVom54uK'},
    10:{yt:'H1ZE9CGO4js', sp:'https://open.spotify.com/embed/episode/1Xwx7y07LMuSwdYNbSfXuv'},
    11:{yt:'ZziFi84H4MQ', sp:'https://open.spotify.com/embed/show/2ogt90wOrOZoRGwY6Ci2Bd'},
  };
  function cardUnidad(u){
    const c = document.createElement('div');
    c.className = 'card';
    c.innerHTML = `
      <h3 style="margin-top:0">${u.id}) ${u.titulo}</h3>
      <div class="editbar">
        <input class="yt-id" placeholder="ID de YouTube" aria-label="ID de YouTube">
        <input class="sp-url" placeholder="URL de Spotify (embed)" aria-label="URL de Spotify">
        <button class="control btn-apply">Aplicar</button>
      </div>
      <div>
        <iframe class="yt" height="240" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
        <div class="row" style="margin:8px 0">
          <input type="file" accept="video/*">
          <button class="control btn-video">Cargar video offline</button>
        </div>
      </div>
      <div>
        <iframe class="sp" style="border-radius:12px" height="152" loading="lazy" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
        <div class="row" style="margin:8px 0">
          <input type="file" accept="audio/*">
          <button class="control btn-audio">Cargar podcast offline</button>
        </div>
      </div>
    `;
    mediaGrid.appendChild(c);
    const yt = c.querySelector('.yt');
    const sp = c.querySelector('.sp');
    const inpY = c.querySelector('.yt-id');
    const inpS = c.querySelector('.sp-url');
    const btnA = c.querySelector('.btn-apply');
    const d = preloads[u.id] || {};
    if(d.yt){ inpY.value = d.yt; yt.src = `https://www.youtube.com/embed/${d.yt}`; }
    if(d.sp){ inpS.value = d.sp; sp.src = d.sp; }
    btnA.addEventListener('click', ()=>{
      const y = inpY.value.trim();
      const s = inpS.value.trim();
      if(y) yt.src = `https://www.youtube.com/embed/${y}`;
      if(s) sp.src = s;
    });
    const btnV = c.querySelector('.btn-video');
    const inpV = c.querySelector('input[type="file"][accept^="video"]');
    btnV.addEventListener('click', ()=>{
      const f = inpV.files?.[0]; if(!f) return alert('Elegí un archivo de video');
      const url = URL.createObjectURL(f);
      const v = document.createElement('video');
      v.controls = true; v.src = url; v.style.width='100%'; v.setAttribute('playsinline',''); v.height = 240;
      yt.replaceWith(v); v.play();
    });
    const btnAudio = c.querySelector('.btn-audio');
    const inpA = c.querySelector('input[type="file"][accept^="audio"]');
    btnAudio.addEventListener('click', ()=>{
      const f = inpA.files?.[0]; if(!f) return alert('Elegí un archivo de audio');
      const url = URL.createObjectURL(f);
      const a = document.createElement('audio');
      a.controls = true; a.src = url; a.style.width='100%';
      sp.replaceWith(a); a.play();
    });
  }
  unidades.sort((a,b)=> a.id - b.id).forEach(cardUnidad);

  /* ===== Sonidos ===== */
  const actx = (window.AudioContext||window.webkitAudioContext) ? new (window.AudioContext||window.webkitAudioContext)() : null;
  function tone(freq=880, ms=180, type='sine', gain=0.06){
    if(!actx) return; const o = actx.createOscillator(), g = actx.createGain();
    o.type = type; o.frequency.value = freq; g.gain.value = gain; o.connect(g).connect(actx.destination); o.start(); setTimeout(()=>o.stop(), ms);
  }
  function successSound(){ tone(880,150,'sine',0.07); setTimeout(()=>tone(1200,180,'sine',0.07),160); }
  function errorSound(){ tone(220,220,'sawtooth',0.06); setTimeout(()=>tone(160,260,'sawtooth',0.05),260); }
  function timeoutSound(){ tone(440,300,'triangle',0.05); setTimeout(()=>tone(300,300,'triangle',0.05),320); }

  /* ===== Juego Ordenar ===== */
  const stepsPool = ['Fetch','Decode','Execute','Memory','Write-back'];
  const pool = document.getElementById('pool');
  const slotsWrap = document.getElementById('slots');
  const slots = Array.from(slotsWrap.querySelectorAll('.slot'));
  const timerEl = document.getElementById('timer');
  const scoreEl = document.getElementById('score');
  const resultGame = document.getElementById('resultGame');
  const startDrag = document.getElementById('startDrag');
  const resetGameBtn = document.getElementById('resetGame');
  const verifyBtn = document.getElementById('verifyBtn');
  let time = 30, filled = 0, running = false, tInt, selectedPill=null, locked=false;

  function shuffle(a){ for(let i=a.length-1;i>0;i--){const j=(Math.random()*(i+1))|0; [a[i],a[j]]=[a[j],a[i]]} return a; }
  function buildPieces(){
    pool.innerHTML = '';
    shuffle([...stepsPool]).forEach(s=>{
      const span = document.createElement('button');
      span.type='button'; span.className = 'pill'; span.textContent = s; span.draggable = true; span.dataset.step = s;
      span.addEventListener('dragstart', e=>{ if(!running || locked){ e.preventDefault(); return; } e.dataTransfer.setData('text/plain', s); });
      span.addEventListener('click', ()=>{ if(!running || locked) return; if(selectedPill===span){ span.classList.remove('active'); selectedPill=null; return; } if(selectedPill) selectedPill.classList.remove('active'); selectedPill = span; span.classList.add('active'); });
      pool.appendChild(span);
    });
    slots.forEach(slot=>{ slot.classList.remove('filled'); slot.textContent = '—'; slot.dataset.value=''; });
    filled = 0; scoreEl.textContent = '0'; resultGame.textContent=''; verifyBtn.disabled = true; locked=false;
  }
  function tick(){
    if(!running) return;
    time--; timerEl.textContent = time;
    if(time<=0){ running=false; clearInterval(tInt); locked=true; resultGame.textContent='⏱️ Tiempo agotado. ¡Probá de nuevo!'; timeoutSound(); }
  }
  function startGame(){ if(actx && actx.state==='suspended') actx.resume(); clearInterval(tInt); time=30; running=true; locked=false; timerEl.textContent=time; tInt = setInterval(tick,1000); }
  function placeInSlot(slot, value, pillEl){
    if(slot.classList.contains('filled') || locked) return;
    slot.classList.add('filled'); slot.textContent = value; slot.dataset.value = value;
    pillEl.remove(); filled++; scoreEl.textContent = String(filled);
    if(filled===5) verifyBtn.disabled = false;
  }
  slots.forEach(slot=>{
    slot.addEventListener('dragover', e=>{ if(running && !locked) e.preventDefault(); });
    slot.addEventListener('drop', e=>{
      e.preventDefault(); if(!running || locked) return;
      const val = e.dataTransfer.getData('text/plain'); if(!val || slot.classList.contains('filled')) return;
      const pill = [...pool.children].find(x=>x.dataset.step===val); if(!pill) return;
      placeInSlot(slot, val, pill);
    });
    slot.addEventListener('click', ()=>{
      if(!running || locked || !selectedPill) return;
      placeInSlot(slot, selectedPill.dataset.step, selectedPill);
      selectedPill = null;
    });
  });
  function evaluateOrder(){
    const ans = ['Fetch','Decode','Execute','Memory','Write-back'];
    const user = slots.map(s=>s.dataset.value || '');
    const ok = ans.every((v,i)=> v===user[i]);
    resultGame.textContent = ok ? '✅ ¡Excelente! Orden correcto.' : '❌ Orden incorrecto. Probá de nuevo.';
    if(ok) successSound(); else errorSound();
  }
  startDrag.addEventListener('click', ()=>{ buildPieces(); startGame(); });
  verifyBtn.addEventListener('click', ()=>{ if(!running) return; running=false; clearInterval(tInt); locked=true; evaluateOrder(); });
  resetGameBtn.addEventListener('click', ()=>{ clearInterval(tInt); running=false; time=30; timerEl.textContent=time; buildPieces(); });
  buildPieces();

  /* ===== Quiz (alineado a unidades) ===== */
  const quizAns = { q1:'ALU', q2:'Memory', q3:'Contiguo', q4:'Clasificacion', q5:'Bootloader' };
  let qTime = 30, qScore = 0, qInt, submitted=false, quizRunning=false;
  const quizTimerEl = document.getElementById('quizTimer');
  const quizScoreEl = document.getElementById('quizScore');
  const quizMsg = document.getElementById('quizMsg');
  const startQuizBtn = document.getElementById('startQuizBtn');
  const submitQuizBtn = document.getElementById('submitQuiz');

  function setQuizEnabled(on){ document.querySelectorAll('#quizForm input, #submitQuiz').forEach(el=> el.disabled = !on); }
  function quizTick(){ if(!quizRunning) return; qTime--; quizTimerEl.textContent = qTime; if(qTime<=0){ quizRunning=false; clearInterval(qInt); timeoutSound(); submitQuiz(); } }
  function startQuiz(){ if(actx && actx.state==='suspended') actx.resume(); clearInterval(qInt); qTime=30; qScore=0; submitted=false; quizRunning=true; quizTimerEl.textContent=qTime; quizScoreEl.textContent=qScore; quizMsg.textContent=''; document.getElementById('quizForm').reset(); setQuizEnabled(true); qInt = setInterval(quizTick,1000); }
  function submitQuiz(){
    if(submitted) return; submitted=true; quizRunning=false; clearInterval(qInt);
    const data = new FormData(document.getElementById('quizForm')); qScore = 0;
    Object.keys(quizAns).forEach(k=>{ if(data.get(k)===quizAns[k]) qScore++; });
    quizScoreEl.textContent = qScore;
    if(qTime<=0){ quizMsg.textContent = `⏱️ Tiempo agotado. Resultado: ${qScore}/5`; }
    else if(qScore===5){ quizMsg.textContent='✅ ¡Perfecto!'; successSound(); }
    else { quizMsg.textContent=`❌ Resultado: ${qScore}/5 — repasá y probá otra vez.`; errorSound(); }
    setQuizEnabled(false);
  }
  startQuizBtn.addEventListener('click', startQuiz);
  submitQuizBtn.addEventListener('click', submitQuiz);
  document.getElementById('resetQuiz').addEventListener('click', ()=>{
    clearInterval(qInt); quizRunning=false; qTime=30; quizTimerEl.textContent=qTime; qScore=0; quizScoreEl.textContent=qScore; quizMsg.textContent='';
    document.getElementById('quizForm').reset(); setQuizEnabled(false);
  });
  setQuizEnabled(false);

  /* ===== Flashcards ===== */
  const flashData = [
    {q:'¿Qué hace la ALU?', a:'Opera aritmético-lógico (suma, AND, comparaciones).'},
    {q:'¿Qué es localidad?', a:'Reutilizar datos cercanos en tiempo/espacio para mejorar cache hit.'},
    {q:'Write-back vs Write-through', a:'WB escribe al reemplazar; WT escribe siempre a memoria.'},
    {q:'¿Para qué sirve el TLB?', a:'Acelera la traducción virtual→física (menos latencia).'},
  ];
  const flashWrap = document.getElementById('flashWrap');
  function buildFlash(){
    flashWrap.innerHTML='';
    flashData.forEach(item=>{
      const card = document.createElement('button');
      card.className='control'; card.style.minWidth='220px'; card.style.minHeight='60px';
      card.textContent=item.q; card.setAttribute('aria-expanded','false');
      card.addEventListener('click', ()=>{
        const open = card.getAttribute('aria-expanded')==='true';
        card.setAttribute('aria-expanded', String(!open));
        card.textContent = open ? item.q : '🧠 ' + item.a;
      });
      flashWrap.appendChild(card);
    });
  }
  buildFlash();
</script>
</body>
</html>
